# L4와 L7의 개념 및 차이점 정리

회사에서 K8S 인프라 환경에서 여러 서비스를 운영하고 있다가 인그레스쪽을 공부하다보니 L4, L7이라는 용어에 대해서 다루다 보니 좀 두 장비의 차이를 알아보기 위해 정리하였습니다.

## L4 로드벨런서란?

L4 로드벨런서는 `IP, Port`를 기준으로 스케줄링 알고리즘을 통해 분산합니다.

클라이언트에서 로드벨런서(DNS)로 요청을 보냈을 때 최적의 경로로 서버에 요청을 전송하고 결과를 클라이언트에게 응답합니다. 

## L7 로드벨런서란?

L7 로드벨런서는 L7 위에서 동작하기 때문에 IP, Port 이외에도 URI, PayLoad, Http Header, Cookie 등의 내용을 기준으로 부하를 분산합니다. 

> L7 로드벨런서를 콘텐츠 기반 스위칭이라고도 불립니다.


## L4와 L7 장비의 차이

앞에서 L4와 L7 로드벨런서에 대해서 간략한 정의를 정리해봤습니다. 

두 장비의 주요 차이점은 L4 로드벨런서는 단지 부하를 분산시키는 것이라면, L7 로드벨런서는 요청의 세부적인 사항을 두고 결제만 담당하는 서버, 주문 및 배송을 담당하는 서버 등으로 분리해 가볍고 작은 단위로 여러 개의 서비스를 운영하고 요청을 각각의 서버에 분산할 수 있는 것입니다.

또한 L7 로드벨런서는 L4 로드벨런서와 다르게 데이터를 분석해서 처리가 가능하기 때문에 악의적이거나 비정상적인 콘텐츠를 감지해 보안 지점을 구축할 수 있는 장점도 있습니다.

하지만 그만큼 리소스를 낭비한다는 단점이 있습니다.
역시.. 뭐든지 트레이드 오프를 감수하고 써야 되는 것 같습니다.

> 참조 블로그: https://jaehoney.tistory.com/73
