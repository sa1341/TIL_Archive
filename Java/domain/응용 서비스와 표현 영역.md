# 응용 서비스와 표현 영역


## 표현 영역과 응용 영역

이전 내용은 주로 도메인과 그 구현에 대한 것이였습니다. 도메인의 구성 요소와 JPA를 이용한 리포지터리 구현 방법들을 살펴보았습니다. 도메인 영역을 잘 구현하지 않으면 사용자의 요구를 충족하는 제대로 된 소프트웨어를 만들지 못합니다.

하지만, 도메인 영역만 잘 만든다고 끝나는 것은 아닙니다. 도메인이 제 기능을 하려면 사용자와 도메인을 연결해주는 매개체가 필요합니다. 바로 응용 영역과 표현 영역이 사용자와 도메인을 연결해주는 매개체 역할을 합니다.

![image](https://user-images.githubusercontent.com/22395934/100451030-0e9c1780-30fa-11eb-83f1-9a8f9984f72a.png)

>> 사용자에게 기능을 제공하려면 도메인과 사용자를 연결해 줄 표현 영역과 응용 영역이 필요합니다.

표현 영역은 사용자의 요청을 해석합니다. 사용자가 웹 브라우저에서 폼에 아이디와 암호를 입력한 뒤에 전송 버튼을 클릭하면 요청 파라미터를 포함한 HTTP 요청을 표현 영역에 전달합니다. 요청을 받은 표현 영역은 URL, 요청 파라미터, 쿠기, 헤더 등을 이용해서 사용자가 어떤 기능을 실행하고 싶어 하는지 판별하고 그 기능을 제공하는 응용 서비스를 실행합니다.

실제 사용자가 원하는 기능을 제공하는 것은 응용 영역에 위치한 서비스 입니다. 사용자가 회원 가입을 요청했다면 실제 그 요청을 위한 기능을 제공하는 주체는 응용 서비스에 위치합니다. 응용 서비스는 기능을 실행하는데 필요한 입력 값을 메서드 파라미터로 전달받고 실행 결과를 리턴합니다.

응용 서비스의 메서드가 요구하는 파라미터와 표현 영역이 사용자로부터 전달받은 데이터는 형식이 일치하지 않기 때문에 표현 영역은 응용 서비스가 요구하는 형식으로 사용자 요청을 변환합니다. 예를 들어, 표현 영역의 코드는 다음과 같이 폼에 입력한 요청 파라미터 값을 사용해서 응용 서비스가 요구하는 객체를 생성한 뒤, 응용 서비스의 메서드를 호출 합니다.

```java
@RequestMapping(value = "/member/join")
public ModelAndView join(HttpServletRequest request) {

    String email = request.getParameter("email");
    String password = request.getParameter("password");
    
    // 사용자 요청을 응용 서비스에 맞게 변환
    JoinRequest joinReq = new JoinRequest(email, password);
    // 변환한 객체(데이터)를 이용해서 응용 서비스 실행
    joinService.join(joinReq);
    ...
}
```

응용 서비스를 실행한 뒤에 표현 영역은 실행 결과를 사용자에게 알맞은 형식으로 응답합니다. 웹 브라우저인 경우 실행 결과를 HTML 형식으로 전송할 수 있습니다. REST를 클라이언트라면 JSON이나 xml과 같은 형식으로 응답할 것입니다.

사용자와의 상호작용은 표현영역이 처리하기 때문에 응용 서비스는 표현 영역에 의존하지 않습니다. 응용 영역은 사용자가 웹 브라우저를 사용하는지, REST API를 호출하는지, TCP 소켓을 사용하는지 여부를 알 필요가 없습니다. 단지, 응용 영역은 기능 실행에 필요한 입력값을 전달받고 실행 결과만 리턴하면 될 뿐입니다.


