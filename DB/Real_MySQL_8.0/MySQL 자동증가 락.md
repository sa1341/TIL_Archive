# 자동 증가 락

MySQL에서는 자동 증가하는 숫자 값을 추출(채번)하기 위해 `AUTO_INCREMENT`라는 컬럼 속성을 제공합니다.

해당 속성을 사용하는 칼럼이 사용되는 테이블에 동시에 여러 레코드가 INSERT 되는 경우, 저장되는 각 레코드는 중복되지 않고 순서대로 증가하는 일려번호를 가져야 합니다.

InnoDB 스토리지 엔진에서는 이를 위해 내부적으로 `AUTO_INCREMENT` 락이라고 하는 테이블 수준의 잠금을 사용합니다.

> AUTO_INCREMENT 락은 INSERT, REPLACE 쿼리 문장과 같이 새로운 레코드를 저장하는 쿼리에만 필요하고, UPDATE, DELETE 등의 쿼리에서는 걸리지 않습니다.

`AUTO_INCREMENT 락`은 테이블에 단 하나만 존재하기 때문에 두 개의 INSERT 쿼리가 동시에 실행되는 경우 하나의 쿼리가 해당 락을 걸면, 나머지 쿼리는 `AUTO_INCREMENT 락`을 기다려야 합니다. 

`AUTO_INCREMENT 락`은 명시적으로 획득하고 해제하는 방법은 없습니다. AUTO_INCREMENT 락은 아주 짧은 시간동안 걸렸다가 해제되는 잠금이라서 대부분의 경우 문제가 발생하지 않습니다.

