# Real MySQL 8.0 설치와 설정

기본적으로 MySQL 서버는 단 하나의 설정 파일을 사용하는데, 리눅스를 포함한 유닉스 계열에서는 `my.cnf`라는 이름을 사용하고, 윈도우 계열에서는 `my.ini`라는 이름을 사용합니다.

MySQL 서버는 지정된 여러 개의 디렉터리를 순차적으로 탐색하면서 처음 발견된 my.cnf 파일을 사용하게 됩니다.


```mysql
mysqld --vervose --help
```

위 명령어를 실행하면 MySQL 서버가 어느 디렉터리에서 `my.cnf` 파일을 읽는지 확인할 수 있습니다.

보통은 아래와 같은 경로에서 읽습니다.

- /etc/my.cnf 파일

- /etc/mysql/my.cnf 파일

- /usr/etc/my.cnf 파일

- ~/.my.cnf 파일

## 사용자 식별

MySQL은 다른 DBMS와 조금 다르게 사용자의 계정뿐 아니라 사용자의 접속 지점(클라이언트가 실행된 호스트명이나 도메인 또는 IP 주소)도 계정의 일부가 됩니다. 

따라서 MySQL에서 계정을 언급할 때는 다음과 같이 항상 아이디와 호스트를 함께 명시해야 합니다.

만약 모든 외부 컴퓨터에 접속이 가능한 사용자 계정을 생성하고 싶다면 아래와 같이 계정의 호스트 부분을 `%` 문자로 대체하면 됩니다.


```
'sa1341'@'%'
```

사용자 계정 식별에서 또 주의해야 할 점은 서로 동일한 아이디가 있을 때 MySQL 서버가 해당 사용자의 인증을 위해 어떤 계정을 선택하느냐 입니다.

예를 들어서 아래와 같이 2개의 사용자 계정이 있습니다.

```
'sa1341'@'192.168.0.10' (이 계정의 비밀번호는 123)

'svc_id'@'%' (이 계정의 비밀번호는 abc)
```

MySQL은 위의 두 계정 정보 가운데 범위가 좁은 것은 `%`가 포함되지 않은 `svc_id`@`192.168.0.10`이기 때문에 IP가 명시된 계정 정보를 이용해 이 사용자를 인증하게 됩니다.

만약 `abc`라는 비밀번호로 로그인을 하면 `비밀번호가 일치하지 않는다`라는 이유로 접속이 거절됩니다.

## MySQL 엔진 아키텍처

MySQL 엔진은 클라이언트로부터의 접속 및 쿼리 요청을 처리하는 커넥션 핸들러와 SQL 파서 및 전처리기, 쿼리의 최적화된 실행을 위한 옵티마이저가 중심을 이룹니다.

또한 MySQL은 표준 SQL(ANSI SQL) 문법을 지원하기 때문에 표준 문법에 따라 작성된 쿼리는 타 DBMS와 호횐되어 실행될 수 있습니다.

## 스토리지 엔진

MySQL 엔진은 요청된 SQL 문장을 분석하거나 최적화하는 등 DBMS의 두뇌에 해당하는 처리를 수행하고, 실제 데이터를 디스크 스토리지에 저장하거나 디스크 스토리지로부터 데이터를 읽어오는 부분은 스토리지 엔진이 전담합니다.

> 참고로 MySQL 서버에서 MySQL 엔진은 하나지만 스토리지 엔진은 여러 개를 동시에 사용할 수 있습니다. 


```
mysql> CREATE TABLE test_table (fd1 INT, fd2 INT) ENGINE=INNODB;
```

위 예제에서 test_table은 InnoDB 스토리지 엔진을 사용하도록 정의하였습니다.

이제 test_table에 대하여 `INSERT, DELETE, UPDATE, SELECT` 등의 작업이 발생하면 InnoDB 스토리지 엔진이 그러한 처리를 담당합니다.

그리고 각 스토리지 엔진은 성능 향상을 위해 키 캐시(MyISAM 스토리지 엔진)나 InnoDB 버퍼 풀(InnoDB 스토리지 엔진)과 같은 기능을 내장하고 있습니다.

## 핸들러 API

MySQL 엔진의 쿼리 실행기에서 데이터를 쓰거나 읽어야 할 때는 각 스토리지 엔진에 쓰기 또는 읽기를 요청하는데, 이러한 요청을 핸들러(Handler) 요청이라 하고, 여기서 사용되는 API를 `핸들러 API`라고 합니다.

API를 핸들러 API라고 합니다. InnoDB 스토리지 엔진 또한 이 핸들러 API를 이용해서 MySQL 엔진과 데이터를 주고받습니다. 
